 <!DOCTYPE html>
<html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
      <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
      <style>
        body, html {
        height: 100%;
        margin: 0;
        background-color: rgb(0, 0, 0);
        }    
    .search{
                  
        width: 90%;
        height: 35px;
        margin: 5px auto;
        border: 1px solid black;
        border-radius: 30px;
        padding-left: 10px;
        font-size: large;

    }
    .datepicker{
        width: 25%;
        height: 35px;
        margin: 0px auto;
        border: 1px solid black;
        border-radius: 30px;
        padding-left: 10px;
        font-size: large;
      
    }
    .banner {
        /* The image used */
        background-image:
        url(https://cdn.pixabay.com/photo/2016/02/01/00/56/news-1172463_960_720.jpg);
        height: 50%; 

        /* Center and scale the image nicely */
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
    }

    .caption {
        position: absolute;
        left: 0;
        top: 25%;
        width: 100%;
        text-align: center;
        color: #000;
        }

    .caption span.border {
        background-color: #111;
        color: #fff;
        padding: 18px;
        font-size: 35px;
        letter-spacing: 10px;
        }

      * {
        box-sizing: border-box;
        }

        .row {
        display: flex;
        }

        /* Create two equal columns that sits next to each other */
        .column {
        flex: 50%;
        padding: 10px;
        height: 300px; /* Should be removed. Only for demonstration */
        margin: auto;
        width: 50%;
        /* border: 3px solid #ffffff; */
        padding: 10px;
        text-align: center;
        }

        .column1 {
        flex: 50%;
        padding: 10px;
        height: 150%; /* Should be removed. Only for demonstration */
        margin: 0px auto;
        width: 50%;
        /* border: 3px solid #ffffff; */
        padding: 10px;
        text-align: center;
        }
    </style>
    </head>
    <body>
        
        <div class="banner">
            <div class="caption">
                <span class="border">NEWS SEARCH SYSTEM</span><br>
               
              </div>
        </div>

        <div class="row">
          <div class="column" style="background-color:rgb(134, 134, 134);">
            <h2>Search News</h2>
            <p>
              <span>
                <input class = "search" type="text" id="searchkeywords" placeholder="Enter Keywords here...">
                
              </span>
            </p>
            <p>
            <label for="searchnewsFromDate">From:</label>
            <input class = "datepicker" type="date" id="searchnewsFromDate" name="searchnewsFromDate">

            <label for="searchnewsToDate">To:</label>
            <input class = "datepicker" type="date" id="searchnewsToDate" name="searchnewsToDate">
            </p>
            <p>
            <button type="button" class="btn btn-dark btn-lg" style="border-radius: 30px; width: 20%;" onclick="searchnewsbutton()">Search</button>
          </p>
          </div>
          




          <div class="column" style="background-color:rgb(189, 185, 185);">
            <h2 >Top Headlines</h2>
            <p>
          <div class="row">
            <div class="column1">
              <div class="dropdown">
              
                <select name="category" id="category" style="width: 80%;" class="btn btn-light btn-lg dropdown-toggle">
                  <option value="-">Select Category</option>
                  <option value="business">Business</option>
                  <option value="entertainment">Entertainment</option>
                  <option value="general">General</option>
                  <option value="health">Health</option>
                  <option value="science">Science</option>
                  <option value="sports">Sports</option>
                  <option value="technology">Technology</option>
                  
                </select>

               
              </div>
            </div>
            <div class="column1">
              <div class="dropdown">
                <select name="country" id="country" style="width: 80%;" class="btn btn-light btn-lg dropdown-toggle">
                  <option value="-">Select Country</option>
                  <option value="in">India</option>
                  <option value="ae">United Arab Emirates</option>
                  <option value="ar">Argentina</option>
                  <option value="at">Austria</option>
                  <option value="au">Australia</option>
                  <option value="be">Belgium</option>
                  <option value="bg">Bulgaria</option>
                  <option value="br">Brazil</option>
                  <option value="ca">Canada</option>
                  <option value="ch">Switzerland</option>
                  <option value="cn">China</option>
                  <option value="co">Colombia</option>
                  <option value="cu">Cuba</option>
                  <option value="cz">Czechia</option>
                  <option value="de">Germany</option>
                  <option value="eg">Egypt</option>
                  <option value="fr">France</option>
                  <option value="gb">United Kingdom of Great Britain and Northern Ireland</option>
                  <option value="gr">Greece</option>
                  <option value="hk">Hong Kong</option>
                  <option value="hu">Hungary</option>
                  <option value="id">Indonesia</option>
                  <option value="ie">Ireland</option>
                  <option value="il">Isarel</option>
                 
                  <option value="it">Italy</option>
                  <option value="jp">Japan</option>
                  <option value="kr">Korea</option>
                  <option value="lt">Lithuania</option>
                  <option value="lv">Latvia</option>
                  <option value="ma">Morocco</option>
                  <option value="mx">Mexico</option>
                  <option value="my">Malaysia</option>
                  <option value="ng">Nigeria</option>
                  <option value="nl">Netherlands</option>
                  <option value="no">Norway</option>
                  <option value="nz">New Zealand</option>
                  <option value="ph">Phillippines</option>
                  <option value="pl">Poland</option>
                  <option value="pt">Portugal</option>
                  <option value="ro">Romania</option>
                  <option value="rs">Serbia</option>
                  <option value="ru">Russian Federation</option>
                  <option value="sa">Saudi Arabia</option>
                  <option value="se">Sweden</option>
                  <option value="sg">Singapore</option>
                  <option value="si">Slovenaia</option>
                  <option value="sk">Slovakia</option>
                  <option value="th">Thailand</option>
                  <option value="tr">Turkiye</option>
                  <option value="tw">Taiwan</option>
                  <option value="ua">Ukraine</option>
                  <option value="us">United States of America</option>
                  <option value="ve">Venezuela</option>
                  <option value="za">South Africa</option>
                </select>
               
            </div>
            
          </div>
          <p>
            <button type="button" class="btn btn-dark btn-lg" style="border-radius: 30px; width: 20%; margin-top: 15px;" onclick="fetchHeadlines()">Search</button>
          </p>
          </div>  
              
          </div>
          
          <form action="/topheadlines" id="category_country_form" method="POST" >
            <input type="hidden" id="category_form" name="category_form" value="">
            <input type="hidden" id="country_form" name="country_form" value="">
          </form> 

          <form action="/searchnews" id="searchnews_form" method="POST" >
            <input type="hidden" id="keyword_form" name="keyword_form" value="">
            <input type="hidden" id="datastart_form" name="datastart_form" value="">
            <input type="hidden" id="dataend_form" name="dataend_form" value="">
          </form> 



          <script type="text/javascript">
              function searchnewsbutton() {
                const URL = '/searchnews'

                var keyword = document.getElementById("searchkeywords").value;
                var startdate = document.getElementById("searchnewsFromDate").value;
                var enddate = document.getElementById("searchnewsToDate").value;

                const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
                const firstDate = new Date(startdate);
                const secondDate = new Date(enddate);
                const todaydate = new Date();
                const diffDays = Math.round(Math.abs((firstDate - todaydate) / oneDay));
                console.log(diffDays)


                if(keyword==""){
                  alert("Enter some keyword");
                }
                else if(startdate==""){
                  alert('Enter Start Date');
                }else if(enddate==""){
                  alert('Enter End Date');
                }else if(startdate>enddate){
                  alert('Enter Valid Date');
                }
                else if(diffDays>30){
                  alert('Articles older then 30days can not be searched');
                }
                else{

                  document.getElementById("keyword_form").value  =keyword;
                  document.getElementById("datastart_form").value  =startdate;
                  document.getElementById("dataend_form").value  =enddate;
                  document.getElementById("searchnews_form").submit();

                  }

                 

                }

            

            function fetchHeadlines() {
                const URL = '/topheadlines'

                var category = document.getElementById("category").value;
                var country = document.getElementById("country").value;
               
                if(category=="-"){
                  alert("Select Some Category");
                }
                else if(country=="-"){
                  alert('Select Some Country');
                }else{

                  // const tosend = {
                  //   json_category:document.getElementById("category").value,
                  //   json_country:document.getElementById("country").value,
                   
                  // };
                  
                  // const jsonstring = JSON.stringify(tosend);
                  // console.log(jsonstring);
                  // alert(jsonstring);
                  
                document.getElementById("category_form").value = category
                document.getElementById("country_form").value = country
                // alert(document.getElementById("category_form").value + '+++' +document.getElementById("country_form").value)
                document.getElementById("category_country_form").submit();
                
                // var xmlhttprequest = new XMLHttpRequest();
                  // xmlhttprequest.open('POST',URL);
                  // xmlhttprequest.setRequestHeader('Content-Type','application/json');
                  //   xmlhttprequest.onreadystatechange = function() {
                  //     if (xmlhttprequest.readyState == XMLHttpRequest.DONE && xmlhttprequest.status == 200) {
                  //         console.log(xmlhttprequest.responseText);
                          
                  //         window.location.href = '/rendertopheadlinepage';
                  //         // document.getElementById("highlowval").innerHTML = xmlhttprequest.responseText;
                        
                  //     }

                  // }

                  // xmlhttprequest.send(jsonstring);   
                  
                  // xmlhttprequest.close();

                }
                
                
            }

          </script>

    </body>
    <!-- Footer -->
<footer class="text-center text-lg-start bg-light text-muted">
  <!-- Section: Social media -->
  <section class="d-flex justify-content-center justify-content-lg-between p-4 border-bottom">
    <!-- Left -->
    <div class="me-5 d-none d-lg-block">
      <span>This Project has been developed as a DPM Project 2022, a course offered by IIITD:</span>
    </div>
    <!-- Left -->

    <!-- Right -->
    
    <!-- Right -->
  </section>
  <!-- Section: Social media -->

  <!-- Section: Links  -->
  <section class="">
    <div class="container text-center text-md-start mt-5">
      <!-- Grid row -->
      <div class="row mt-3">
        <!-- Grid column -->
        <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">
          <!-- Content -->
          <h6 class="text-uppercase fw-bold mb-4">
            <i class="fas fa-gem me-3"></i>Team Members 
          </h6>
          <p>Niharika Poddar ( MT21057)</p>
          <p>Parul Jain ( MT21064)</p>
          <p>Shubham Jain ( MT21091)</p>
         
        </div>
        <!-- Grid column -->

     

        <!-- Grid column -->
        <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
          <!-- Links -->
          <h6 class="text-uppercase fw-bold mb-4">Mentors</h6>
       
          <p>
            Pravesh Biyani (Faculty)
          </p>
          <p>
            Raashid Altaf (TA)
          </p>
          <p>
            Gitansh Raj Satija (TA)
          </p>
          <p>
            Mohd. Siraj Ansari (TA)
          </p>
        </div>
        <!-- Grid column -->
      </div>
      <!-- Grid row -->
    </div>
  </section>
  <!-- Section: Links  -->

  <!-- Copyright -->
 
  <!-- Copyright -->
</footer>
<!-- Footer -->
</html>